# Placy — Социальная сеть на карте

> Мобильное приложение-интерактивная карта, где пользователи делятся фотографиями по геолокации в реальном времени.  
> Аналог BeReal + Zenly + Locket, но с акцентом на отечественные технологии.

## Участники проекта

| ФИО                         | Группа         |
|----------------------------|----------------|
| Плужник Анастасия Дмитриевна | 5130904/30107 |
| Голиков Валентин Сергеевич   | 5130904/30107 |
| Губанов Иван Андреевич       | 5130904/30107 |

---

## Этапы разработки

### 1. Определение проблемы

Пользователи социальных сетей хотят делиться моментами жизни не только через фото, но и через **географический контекст**, но большинство приложений не интегрируют его визуально.  
Существующие решения (BeReal, Zenly) ушли с российского рынка, оставив потребность в **локальном аналоге** с поддержкой карт и гео-фотографий.  
Путешественники, блогеры и просто любопытные люди не могут легко находить **реальные фото из интересующих мест**.

---

### 2. Выработка требований

#### Пользовательские сценарии (Jobs to be done):

1. **Как путешественник**, я хочу делать фото в реальном времени и публиковать его на карте с геометкой, чтобы друзья могли видеть, где я был.
2. **Как пользователь, ищущий вдохновение**, я хочу просматривать фотографии других людей на интерактивной карте, нажимать на метки и видеть фото разных пользователей.

#### Оценка нагрузки:
- **Ежедневная аудитория**: ~20 000 пользователей
- **Период хранения данных**:
    - Фотографии и метаданные — **5 лет**
    - Учетные записи — **бессрочно**

---

### 3. Разработка архитектуры и детальное проектирование

#### Характер нагрузки:
- **R/W соотношение**: 80% чтение / 20% запись
- **Ежедневные запросы**: ~780 000
- **Суточный трафик**: ~3.5 ТБ
- **Дисковое пространство (5 лет)**: ~300 ТБ (включая фото и метаданные)

#### Диаграммы C4 (см. папку `/docs`):
- `system-context.png` — Контекст системы
- `container-diagram.png` — Архитектура контейнеров

#### API-контракты (основные эндпоинты):
- `POST /auth/register` — регистрация
- `POST /auth/login` — вход
- `GET /geomarks` — получение всех меток
- `POST /geomarks` — публикация новой метки
- `POST /geomarks/{id}/like` — лайк/избранное

**Нефункциональные требования**:
- Время отклика на чтение ≤ 300 мс
- Время загрузки фото ≤ 2 с (при хорошем интернете)

#### СУБД:
- **PostgreSQL** — реляционная модель с таблицами:
    - `users(id, email, username, created_at)`
    - `geomarks(id, photo_uuid, lat, lon, user_id, caption, likes_count, created_at)`
    - `likes(user_id, mark_id)`
- Индексы по `(lat, lon)` и `user_id` обеспечивают быстрый поиск на карте и в профиле.

#### Масштабирование:
При росте нагрузки в 10×:
- Горизонтальное масштабирование API через Kubernetes
- Репликация PostgreSQL (read replicas)
- Хранение фото в объектном хранилище (MinIO или S3)

---

### 4. Кодирование и отладка

- Проект написан на **Kotlin** с использованием **Jetpack Compose**.
- Используются:
    - **Yandex MapKit KMP** — для отображения карты
    - **Ktor Client** — для HTTP-запросов
    - **Coil 3** — для загрузки изображений
    - **Compass Geolocation** — для получения координат
- Все участники сделали коммиты в основную ветку (`main`).

---

### 5. Unit-тестирование

- Покрытие unit-тестами: **≥80%**
- Используется **JUnit 5**
- Тестируются:
    - Валидация входных данных (email, пароль)
    - Логика работы с `GeoMark`
    - Обработка ответов от API (успешные/ошибочные)
- Запуск:
  ```bash
  ./gradlew test